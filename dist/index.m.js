import e from"axios";function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}var o,s=/*#__PURE__*/function(){function r(e){this.apiKey=void 0,this.baseUrl=void 0,this.apiKey=e.apiKey,this.baseUrl=e.baseUrl||"https://api-prod.getmessenger.ng"}return r.prototype.request=function(r,n,o,s){var a=t({method:n,url:""+this.baseUrl+r,headers:{"Content-Type":"application/json","api-key":this.apiKey}},s,{data:o?JSON.stringify(o):void 0});return e(a).then(function(e){if(e.status>=200&&e.status<300)return e.data;throw new Error(e.statusText)}).catch(function(e){throw e.response?new Error("Status: "+e.response.status+", "+e.response.statusText):e.request?new Error("No response received."):new Error("Check your network connection and try again.")})},r}(),a=/*#__PURE__*/function(e){function t(t,r){var n;return(n=e.call(this,{apiKey:"",baseUrl:"https://api-prod.getmessenger.ng"})||this).publicKey=void 0,n.privateKey=void 0,n.accessToken=void 0,n.publicKey=t,n.privateKey=r,n.accessToken=null,n}r(t,e);var n=t.prototype;return n.generateBearerToken=function(){try{var e=this;if(e.accessToken)return Promise.resolve(e.accessToken);var t={username:e.publicKey,password:e.privateKey};return Promise.resolve(function(r,n){try{var o=Promise.resolve(e.authenticate(t)).then(function(t){if(t&&t.headers&&t.headers["access-token"])return e.accessToken=t.headers["access-token"],e.accessToken;throw new Error("Access token not found in the response headers.")})}catch(e){return n(e)}return o&&o.then?o.then(void 0,n):o}(0,function(e){return console.error("Authentication failed: "+e.message),null}))}catch(e){return Promise.reject(e)}},n.authenticate=function(e){try{return Promise.resolve(this.request("auth/login","POST",{data:e}))}catch(e){return Promise.reject(e)}},t}(s),i=/*#__PURE__*/function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t}(s);o=i,[a].forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){Object.defineProperty(o.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t)||Object.create(null))})});export{i as default};
